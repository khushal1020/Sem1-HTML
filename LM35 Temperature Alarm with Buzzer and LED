// LM35 Temperature Alarm with Buzzer + LED

const int LM35_PIN = A0;     // LM35 middle pin
const int BUZZER_PIN = 8;    // Active buzzer
const int LED_PIN = 13;      // LED (or onboard LED)

float thresholdC = 30.0;     // Temperature limit (°C)
unsigned long readInterval = 1000; // 1 second delay

unsigned long lastRead = 0;

void setup() {
  Serial.begin(9600);

  pinMode(BUZZER_PIN, OUTPUT);
  pinMode(LED_PIN, OUTPUT);

  digitalWrite(BUZZER_PIN, LOW);
  digitalWrite(LED_PIN, LOW);

  Serial.println("LM35 Temperature Alarm Started...");
}

void loop() {
  unsigned long now = millis();

  if (now - lastRead >= readInterval) {
    lastRead = now;

    int raw = analogRead(LM35_PIN);
    float voltage = raw * (5.0 / 1023.0);   // ADC to Volts
    float tempC = voltage * 100.0;         // LM35 = 10mV per °C

    Serial.print("Temperature: ");
    Serial.print(tempC);
    Serial.println(" °C");

    if (tempC >= thresholdC) {
      // Alarm ON
      digitalWrite(BUZZER_PIN, HIGH);
      digitalWrite(LED_PIN, HIGH);
    } 
    else {
      // Alarm OFF
      digitalWrite(BUZZER_PIN, LOW);
      digitalWrite(LED_PIN, LOW);
    }
  }
}
